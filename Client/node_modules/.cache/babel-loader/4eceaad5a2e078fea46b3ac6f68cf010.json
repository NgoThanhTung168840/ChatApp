{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tung Thanh\\\\Desktop\\\\Project_HPT\\\\react-spring-messenger-project\\\\Client\\\\src\\\\components\\\\websocket\\\\websocket-chat-component.tsx\",\n  _s = $RefreshSig$();\nimport SendIcon from \"@mui/icons-material/Send\";\nimport HighlightOffIcon from \"@mui/icons-material/HighlightOff\";\nimport ImageIcon from \"@mui/icons-material/Image\";\nimport { Box, Button, CircularProgress, IconButton, Tooltip } from \"@mui/material\";\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { GroupActionEnum } from \"./group-action-enum\";\nimport { useAuthContext } from \"../../context/auth-context\";\nimport { useLoaderContext } from \"../../context/loader-context\";\nimport { useThemeContext } from \"../../context/theme-context\";\nimport { useWebSocketContext } from \"../../context/ws-context\";\nimport { getPayloadSize } from \"../../utils/string-size-calculator\";\nimport { TransportActionEnum } from \"../../utils/transport-action-enum\";\nimport { TypeMessageEnum } from \"../../utils/type-message-enum\";\nimport { markMessageAsSeen } from \"../../reducers\";\nimport { NoDataComponent } from \"../partials/no-data-component\";\nimport { TransportModel } from \"../../interface-contract/transport-model\";\nimport { CallWindowComponent } from \"./call-window-component\";\nimport { ImagePreviewComponent } from \"../partials/image-preview\";\nimport { CustomTextField } from \"../partials/custom-material-textfield\";\nimport { ActiveVideoCall } from \"../partials/video/active-video-call\";\nimport { HttpService } from \"../../service/http-service\";\nimport { generateIconColorMode } from \"../utils/enable-dark-mode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const WebSocketChatComponent = _ref => {\n  _s();\n  let {\n    groupUrl\n  } = _ref;\n  const {\n    theme\n  } = useThemeContext();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    ws\n  } = useWebSocketContext();\n  const {\n    setLoading\n  } = useLoaderContext();\n  const [isPreviewImageOpen, setPreviewImageOpen] = React.useState(false);\n  const dispatch = useDispatch();\n  const [messageId, setLastMessageId] = React.useState(0);\n  const [loadingOldMessages, setLoadingOldMessages] = React.useState(false);\n  const [imgSrc, setImgSrc] = React.useState(\"\");\n  const [file, setFile] = React.useState(null);\n  const [imagePreviewUrl, setImagePreviewUrl] = React.useState(\"\");\n  const [imageLoaded, setImageLoaded] = React.useState(false);\n  const [message, setMessage] = React.useState(\"\");\n  const httpService = new HttpService();\n  let messageEnd;\n  const {\n    isWsConnected,\n    chatHistory,\n    allMessagesFetched,\n    currentActiveGroup,\n    currentGroup,\n    userId\n  } = useSelector(state => state.globalReducer);\n  useEffect(() => {\n    if (isWsConnected && groupUrl && ws) {\n      const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, -1);\n      ws.publish({\n        destination: \"/app/message\",\n        body: JSON.stringify(transport)\n      });\n      setLoading(false);\n    }\n  }, [isWsConnected]);\n  useEffect(() => {\n    if (groupUrl && ws && ws.connected) {\n      const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, -1);\n      ws.publish({\n        destination: \"/app/message\",\n        body: JSON.stringify(transport)\n      });\n    }\n  }, [groupUrl, ws]);\n  useEffect(() => {\n    if (!loadingOldMessages) {\n      scrollToEnd();\n    }\n    setLoadingOldMessages(false);\n    if (chatHistory && chatHistory.length > 0) {\n      setLastMessageId(chatHistory[0].id);\n    }\n  }, [chatHistory]);\n  function styleSelectedMessage() {\n    return theme === \"dark\" ? \"hover-msg-dark\" : \"hover-msg-light\";\n  }\n  function generateImageRender(message) {\n    if (message.fileUrl === undefined) {\n      return null;\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: message.fileUrl,\n        height: \"200px\",\n        alt: message.name,\n        onClick: () => handleImagePreview(GroupActionEnum.OPEN, message.fileUrl),\n        style: {\n          border: \"1px solid #c8c8c8\",\n          borderRadius: \"7%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 3\n    }, this);\n  }\n  function resetImageBuffer(event) {\n    event.preventDefault();\n    setFile(null);\n    setImagePreviewUrl(\"\");\n    setImageLoaded(false);\n  }\n  function previewFile(event) {\n    resetImageBuffer(event);\n    const reader = new FileReader();\n    const file = event.target.files[0];\n    reader.readAsDataURL(file);\n    reader.onload = e => {\n      if (e.target && e.target.readyState === FileReader.DONE) {\n        setFile(file);\n        setImagePreviewUrl(reader.result);\n        setImageLoaded(true);\n      }\n    };\n  }\n  function submitMessage(event) {\n    if (message !== \"\") {\n      if (event.key !== undefined && event.shiftKey && event.keyCode === 13) {\n        return;\n      }\n      if (event.key !== undefined && event.keyCode === 13) {\n        event.preventDefault();\n        setMessage(\"\");\n        sendMessage();\n      }\n    }\n  }\n  function handleChange(event) {\n    setMessage(event.target.value);\n  }\n  async function sendMessage() {\n    if (message !== \"\") {\n      if (getPayloadSize(message) < 8192 && ws && ws.active) {\n        const transport = new TransportModel(userId || 0, TransportActionEnum.SEND_GROUP_MESSAGE, undefined, currentActiveGroup, message);\n        ws.publish({\n          destination: \"/app/message\",\n          body: JSON.stringify(transport)\n        });\n      }\n      setMessage(\"\");\n    }\n    if (file !== null) {\n      const userId = String(user === null || user === void 0 ? void 0 : user.id);\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"userId\", userId);\n      formData.append(\"groupUrl\", groupUrl || \"\");\n      await httpService.uploadFile(formData);\n      setMessage(\"\");\n      setImageLoaded(false);\n      setFile(null);\n      setImagePreviewUrl(\"\");\n    }\n  }\n  function scrollToEnd() {\n    var _messageEnd;\n    (_messageEnd = messageEnd) === null || _messageEnd === void 0 ? void 0 : _messageEnd.scrollIntoView({\n      behavior: \"auto\"\n    });\n  }\n  function handlePopupState(isOpen) {\n    setPreviewImageOpen(isOpen);\n  }\n  function handleImagePreview(action, src) {\n    switch (action) {\n      case GroupActionEnum.OPEN:\n        setImgSrc(src);\n        handlePopupState(true);\n        break;\n      case GroupActionEnum.CLOSE:\n        handlePopupState(false);\n        break;\n      default:\n        throw new Error(\"handleImagePreview failed\");\n    }\n  }\n  function markMessageSeen() {\n    dispatch(markMessageAsSeen({\n      groupUrl\n    }));\n  }\n  function handleScroll(event) {\n    if (event.target.scrollTop === 0) {\n      if (!allMessagesFetched && ws) {\n        setLoadingOldMessages(true);\n        const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, messageId);\n        ws.publish({\n          destination: \"/app/message\",\n          body: JSON.stringify(transport)\n        });\n      }\n    } else {\n      setLoadingOldMessages(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: groupUrl === \"\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flex: \"1\",\n        flexDirection: \"column\",\n        maxWidth: \"45%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(NoDataComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 3\n    }, this) : currentGroup.group && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flex: \"1\",\n        flexDirection: \"column\",\n        maxWidth: \"45%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          height: \"50px\",\n          borderBottom: \"1px solid gray\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          m: 1,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"20px\",\n              fontWeight: \"bold\"\n            },\n            children: currentGroup.group.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(ActiveVideoCall, {\n            isAnyCallActive: currentGroup.groupCall.anyCallActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onScroll: event => handleScroll(event),\n        style: {\n          backgroundColor: \"transparent\",\n          width: \"100%\",\n          height: \"calc(100% - 56px)\",\n          overflowY: \"scroll\"\n        },\n        children: [!allMessagesFetched && loadingOldMessages && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"inherit\",\n            boxSizing: \"border-box\",\n            height: \"40px\",\n            position: \"relative\",\n            display: \"flex\",\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n                style: {\n                  margin: \"5px\"\n                },\n                size: 40\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"16px\"\n              },\n              children: \"Loading older messages ....\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(ImagePreviewComponent, {\n          imgSrc: imgSrc,\n          displayImagePreview: isPreviewImageOpen,\n          setDisplayImagePreview: handlePopupState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 6\n        }, this), chatHistory && chatHistory.map((messageModel, index, array) => /*#__PURE__*/_jsxDEV(Tooltip, {\n          enterDelay: 1000,\n          leaveDelay: 0,\n          title: new Date(messageModel.time).getHours() + \":\" + new Date(messageModel.time).getMinutes(),\n          placement: \"left\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg \" + styleSelectedMessage(),\n            style: {\n              display: \"flex\"\n            },\n            children: [index >= 1 && array[index - 1].userId === array[index].userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: \"40px\",\n                width: \"40px\",\n                height: \"40px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 9\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontFamily: \"Segoe UI,SegoeUI,\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif\",\n                backgroundColor: `${messageModel.color}`,\n                fontWeight: \"bold\",\n                minWidth: \"40px\",\n                width: \"40px\",\n                height: \"40px\",\n                textAlign: \"center\",\n                fontSize: \"20px\",\n                borderRadius: \"8px\",\n                border: `1px solid ${generateIconColorMode(theme)}`,\n                lineHeight: \"37px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: \"#FFFFFF\"\n                },\n                children: messageModel.initials\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: \"4px\"\n              },\n              children: [index >= 1 && array[index - 1].userId === array[index].userId ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 11\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: [messageModel.sender, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 7\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 11\n              }, this), messageModel.type === TypeMessageEnum.TEXT ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  overflowWrap: \"break-word\"\n                },\n                children: messageModel.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 9\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: generateImageRender(messageModel)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 9\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 5\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: \"left\",\n            clear: \"both\"\n          },\n          ref: el => {\n            messageEnd = el;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            boxSizing: \"border-box\",\n            borderBottom: \"0.5px solid #C8C8C8\"\n          },\n          children: imagePreviewUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: \"10px\",\n              height: \"120px\",\n              maxWidth: \"120px\",\n              background: \"url('\" + imagePreviewUrl + \"')\",\n              backgroundSize: \"cover\",\n              position: \"relative\",\n              borderRadius: \"10%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              style: {\n                height: \"20px\",\n                position: \"absolute\",\n                right: \"8px\",\n                top: \"8px\",\n                width: \"20px\"\n              },\n              onClick: event => resetImageBuffer(event),\n              children: /*#__PURE__*/_jsxDEV(HighlightOffIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            width: \"100%\",\n            alignItems: \"center\",\n            position: \"relative\",\n            bottom: \"0\",\n            padding: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \"image/*\",\n            style: {\n              display: \"none\"\n            },\n            id: \"raised-button-file\",\n            multiple: true,\n            type: \"file\",\n            onChange: event => previewFile(event)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(CallWindowComponent, {\n            userId: userId || 0,\n            groupUrl: groupUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"raised-button-file\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"text\",\n              component: \"span\",\n              children: /*#__PURE__*/_jsxDEV(ImageIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(CustomTextField, {\n            id: \"inputChatMessenger\",\n            label: \"Write a message\",\n            value: message,\n            onClick: markMessageSeen,\n            handleChange: event => handleChange(event),\n            type: \"text\",\n            keyUp: submitMessage,\n            isMultiline: true,\n            isDarkModeEnable: theme,\n            name: \"mainWriteMessage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: sendMessage,\n            variant: \"contained\",\n            color: \"primary\",\n            style: {\n              marginLeft: \"3px\",\n              maxWidth: \"20px\"\n            },\n            disabled: !imageLoaded && message === \"\",\n            children: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n_s(WebSocketChatComponent, \"rMU7BFCpNJsdQCfsHHEclzmJGAM=\", false, function () {\n  return [useThemeContext, useAuthContext, useWebSocketContext, useLoaderContext, useDispatch, useSelector];\n});\n_c = WebSocketChatComponent;\nvar _c;\n$RefreshReg$(_c, \"WebSocketChatComponent\");","map":{"version":3,"names":["SendIcon","HighlightOffIcon","ImageIcon","Box","Button","CircularProgress","IconButton","Tooltip","React","useEffect","useDispatch","useSelector","GroupActionEnum","useAuthContext","useLoaderContext","useThemeContext","useWebSocketContext","getPayloadSize","TransportActionEnum","TypeMessageEnum","markMessageAsSeen","NoDataComponent","TransportModel","CallWindowComponent","ImagePreviewComponent","CustomTextField","ActiveVideoCall","HttpService","generateIconColorMode","WebSocketChatComponent","groupUrl","theme","user","ws","setLoading","isPreviewImageOpen","setPreviewImageOpen","useState","dispatch","messageId","setLastMessageId","loadingOldMessages","setLoadingOldMessages","imgSrc","setImgSrc","file","setFile","imagePreviewUrl","setImagePreviewUrl","imageLoaded","setImageLoaded","message","setMessage","httpService","messageEnd","isWsConnected","chatHistory","allMessagesFetched","currentActiveGroup","currentGroup","userId","state","globalReducer","transport","FETCH_GROUP_MESSAGES","undefined","publish","destination","body","JSON","stringify","connected","scrollToEnd","length","id","styleSelectedMessage","generateImageRender","fileUrl","name","handleImagePreview","OPEN","border","borderRadius","resetImageBuffer","event","preventDefault","previewFile","reader","FileReader","target","files","readAsDataURL","onload","e","readyState","DONE","result","submitMessage","key","shiftKey","keyCode","sendMessage","handleChange","value","active","SEND_GROUP_MESSAGE","String","formData","FormData","append","uploadFile","scrollIntoView","behavior","handlePopupState","isOpen","action","src","CLOSE","Error","markMessageSeen","handleScroll","scrollTop","display","flex","flexDirection","maxWidth","group","width","height","borderBottom","fontSize","fontWeight","groupCall","anyCallActive","backgroundColor","overflowY","boxSizing","position","justifyContent","margin","map","messageModel","index","array","Date","time","getHours","getMinutes","minWidth","fontFamily","color","textAlign","lineHeight","initials","sender","type","TEXT","overflowWrap","float","clear","el","padding","background","backgroundSize","right","top","alignItems","bottom","marginLeft"],"sources":["C:/Users/Tung Thanh/Desktop/Project_HPT/react-spring-messenger-project/Client/src/components/websocket/websocket-chat-component.tsx"],"sourcesContent":["import SendIcon from \"@mui/icons-material/Send\"\r\nimport HighlightOffIcon from \"@mui/icons-material/HighlightOff\"\r\nimport ImageIcon from \"@mui/icons-material/Image\"\r\nimport { Box, Button, CircularProgress, IconButton, Tooltip } from \"@mui/material\"\r\nimport React, { useEffect } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { GroupActionEnum } from \"./group-action-enum\"\r\nimport { useAuthContext } from \"../../context/auth-context\"\r\nimport { useLoaderContext } from \"../../context/loader-context\"\r\nimport { useThemeContext } from \"../../context/theme-context\"\r\nimport { useWebSocketContext } from \"../../context/ws-context\"\r\nimport { FullMessageModel } from \"../../interface-contract/full-message-model\"\r\nimport { getPayloadSize } from \"../../utils/string-size-calculator\"\r\nimport { TransportActionEnum } from \"../../utils/transport-action-enum\"\r\nimport { TypeMessageEnum } from \"../../utils/type-message-enum\"\r\nimport { markMessageAsSeen } from \"../../reducers\"\r\nimport { StoreState } from \"../../reducers/types\"\r\nimport { NoDataComponent } from \"../partials/no-data-component\"\r\nimport { TransportModel } from \"../../interface-contract/transport-model\"\r\nimport { CallWindowComponent } from \"./call-window-component\"\r\nimport { ImagePreviewComponent } from \"../partials/image-preview\"\r\nimport { CustomTextField } from \"../partials/custom-material-textfield\"\r\nimport { ActiveVideoCall } from \"../partials/video/active-video-call\"\r\nimport { HttpService } from \"../../service/http-service\"\r\nimport { generateIconColorMode } from \"../utils/enable-dark-mode\"\r\n\r\nexport const WebSocketChatComponent: React.FunctionComponent<{ groupUrl: string }> = ({ groupUrl }) => {\r\n  const { theme } = useThemeContext()\r\n  const { user } = useAuthContext()\r\n  const { ws } = useWebSocketContext()\r\n  const { setLoading } = useLoaderContext()\r\n  const [isPreviewImageOpen, setPreviewImageOpen] = React.useState(false)\r\n  const dispatch = useDispatch()\r\n  const [messageId, setLastMessageId] = React.useState(0)\r\n  const [loadingOldMessages, setLoadingOldMessages] = React.useState<boolean>(false)\r\n\r\n  const [imgSrc, setImgSrc] = React.useState(\"\")\r\n  const [file, setFile] = React.useState<File | null>(null)\r\n  const [imagePreviewUrl, setImagePreviewUrl] = React.useState<string>(\"\")\r\n  const [imageLoaded, setImageLoaded] = React.useState(false)\r\n  const [message, setMessage] = React.useState(\"\")\r\n  const httpService = new HttpService()\r\n  let messageEnd: HTMLDivElement | null\r\n\r\n  const {\r\n    isWsConnected,\r\n    chatHistory,\r\n    allMessagesFetched,\r\n    currentActiveGroup,\r\n    currentGroup,\r\n    userId\r\n  } = useSelector(\r\n    (state: StoreState) => state.globalReducer\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (isWsConnected && groupUrl && ws) {\r\n\t const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, -1)\r\n\t ws.publish({\r\n\t   destination: \"/app/message\",\r\n\t   body: JSON.stringify(transport)\r\n\t })\r\n\t setLoading(false)\r\n    }\r\n  }, [isWsConnected])\r\n\r\n  useEffect(() => {\r\n    if (groupUrl && ws && ws.connected) {\r\n\t const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, -1)\r\n\t ws.publish({\r\n\t   destination: \"/app/message\",\r\n\t   body: JSON.stringify(transport)\r\n\t })\r\n    }\r\n  }, [groupUrl, ws])\r\n\r\n  useEffect(() => {\r\n    if (!loadingOldMessages) {\r\n\t scrollToEnd()\r\n    }\r\n    setLoadingOldMessages(false)\r\n    if (chatHistory && chatHistory.length > 0) {\r\n\t setLastMessageId(chatHistory[0].id)\r\n    }\r\n  }, [chatHistory])\r\n\r\n  function styleSelectedMessage () {\r\n    return theme === \"dark\" ? \"hover-msg-dark\" : \"hover-msg-light\"\r\n  }\r\n\r\n  function generateImageRender (message: FullMessageModel) {\r\n    if (message.fileUrl === undefined) {\r\n\t return null\r\n    }\r\n    return (\r\n\t <div>\r\n\t   <img src={message.fileUrl} height={\"200px\"} alt={message.name}\r\n\t\t   onClick={() => handleImagePreview(GroupActionEnum.OPEN, message.fileUrl)}\r\n\t\t   style={{\r\n\t\t\tborder: \"1px solid #c8c8c8\",\r\n\t\t\tborderRadius: \"7%\"\r\n\t\t   }}/>\r\n\t </div>\r\n    )\r\n  }\r\n\r\n  function resetImageBuffer (event: any) {\r\n    event.preventDefault()\r\n    setFile(null)\r\n    setImagePreviewUrl(\"\")\r\n    setImageLoaded(false)\r\n  }\r\n\r\n  function previewFile (event: any) {\r\n    resetImageBuffer(event)\r\n    const reader = new FileReader()\r\n    const file = event.target.files[0]\r\n    reader.readAsDataURL(file)\r\n\r\n    reader.onload = (e) => {\r\n\t if (e.target && e.target.readyState === FileReader.DONE) {\r\n\t   setFile(file)\r\n\t   setImagePreviewUrl(reader.result as string)\r\n\t   setImageLoaded(true)\r\n\t }\r\n    }\r\n  }\r\n\r\n  function submitMessage (event: any) {\r\n    if (message !== \"\") {\r\n\t if (event.key !== undefined && event.shiftKey && event.keyCode === 13) {\r\n\t   return\r\n\t }\r\n\t if (event.key !== undefined && event.keyCode === 13) {\r\n\t   event.preventDefault()\r\n\t   setMessage(\"\")\r\n\t   sendMessage()\r\n\t }\r\n    }\r\n  }\r\n\r\n  function handleChange (event: any) {\r\n    setMessage(event.target.value)\r\n  }\r\n\r\n  async function sendMessage () {\r\n    if (message !== \"\") {\r\n\t if (getPayloadSize(message) < 8192 && ws && ws.active) {\r\n\t   const transport = new TransportModel(userId || 0, TransportActionEnum.SEND_GROUP_MESSAGE, undefined, currentActiveGroup, message)\r\n\t   ws.publish({\r\n\t\tdestination: \"/app/message\",\r\n\t\tbody: JSON.stringify(transport)\r\n\t   })\r\n\t }\r\n\t setMessage(\"\")\r\n    }\r\n    if (file !== null) {\r\n\t const userId = String(user?.id)\r\n\t const formData = new FormData()\r\n\t formData.append(\"file\", file)\r\n\t formData.append(\"userId\", userId)\r\n\t formData.append(\"groupUrl\", groupUrl || \"\")\r\n\t await httpService.uploadFile(formData)\r\n\t setMessage(\"\")\r\n\t setImageLoaded(false)\r\n\t setFile(null)\r\n\t setImagePreviewUrl(\"\")\r\n    }\r\n  }\r\n\r\n  function scrollToEnd () {\r\n    messageEnd?.scrollIntoView({ behavior: \"auto\" })\r\n  }\r\n\r\n  function handlePopupState (isOpen: boolean) {\r\n    setPreviewImageOpen(isOpen)\r\n  }\r\n\r\n  function handleImagePreview (action: string, src: string) {\r\n    switch (action) {\r\n    case GroupActionEnum.OPEN:\r\n\t setImgSrc(src)\r\n\t handlePopupState(true)\r\n\t break\r\n    case GroupActionEnum.CLOSE:\r\n\t handlePopupState(false)\r\n\t break\r\n    default:\r\n\t throw new Error(\"handleImagePreview failed\")\r\n    }\r\n  }\r\n\r\n  function markMessageSeen () {\r\n    dispatch(markMessageAsSeen({\r\n\t groupUrl\r\n    }))\r\n  }\r\n\r\n  function handleScroll (event: any) {\r\n    if (event.target.scrollTop === 0) {\r\n\t if (!allMessagesFetched && ws) {\r\n\t   setLoadingOldMessages(true)\r\n\t   const transport = new TransportModel(userId || 0, TransportActionEnum.FETCH_GROUP_MESSAGES, undefined, groupUrl, undefined, messageId)\r\n\t   ws.publish({\r\n\t\tdestination: \"/app/message\",\r\n\t\tbody: JSON.stringify(transport)\r\n\t   })\r\n\t }\r\n    } else {\r\n\t setLoadingOldMessages(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n\t {\r\n\t   groupUrl === \"\" ?\r\n\t\t<div style={{\r\n\t\t  display: \"flex\",\r\n\t\t  flex: \"1\",\r\n\t\t  flexDirection: \"column\",\r\n\t\t  maxWidth: \"45%\"\r\n\t\t}}>\r\n\t\t  <NoDataComponent/>\r\n\t\t</div>\r\n\t\t: currentGroup.group &&\r\n\t\t\t<div style={{\r\n\t\t    display: \"flex\",\r\n\t\t    flex: \"1\",\r\n\t\t    flexDirection: \"column\",\r\n\t\t    maxWidth: \"45%\"\r\n\t\t  }}>\r\n\t\t\t\t<div style={{\r\n\t\t\t   width: \"100%\",\r\n\t\t\t   height: \"50px\",\r\n\t\t\t   borderBottom: \"1px solid gray\"\r\n\t\t\t }}>\r\n\t\t\t\t\t<Box m={1} display={\"flex\"} justifyContent={\"space-between\"}>\r\n\t\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\t  fontSize: \"20px\",\r\n\t\t\t\t\t\t\t\t  fontWeight: \"bold\"\r\n\t\t\t\t\t\t\t\t}}>{currentGroup.group.name}</span>\r\n\t\t\t\t\t\t<ActiveVideoCall isAnyCallActive={currentGroup.groupCall.anyCallActive}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonScroll={(event) => handleScroll(event)}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t  backgroundColor: \"transparent\",\r\n\t\t\t\t  width: \"100%\",\r\n\t\t\t\t  height: \"calc(100% - 56px)\",\r\n\t\t\t\t  overflowY: \"scroll\"\r\n\t\t\t\t}}>\r\n\t\t\t   {\r\n\t\t\t\t!allMessagesFetched && loadingOldMessages &&\r\n\t\t\t\t\t  <div style={{\r\n\t\t\t\t    width: \"inherit\",\r\n\t\t\t\t    boxSizing: \"border-box\",\r\n\t\t\t\t    height: \"40px\",\r\n\t\t\t\t    position: \"relative\",\r\n\t\t\t\t    display: \"flex\",\r\n\t\t\t\t    justifyContent: \"center\"\r\n\t\t\t\t  }}>\r\n\t\t\t\t\t\t  <div style={{\r\n\t\t\t\t\t   display: \"flex\",\r\n\t\t\t\t\t   flexDirection: \"column\"\r\n\t\t\t\t\t }}>\r\n\t\t\t\t\t\t\t  <div style={{\r\n\t\t\t\t\t\t  display: \"flex\",\r\n\t\t\t\t\t\t  justifyContent: \"center\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t  <CircularProgress style={{ margin: \"5px\" }} size={40}/>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <span style={{ fontSize: \"16px\" }}>Loading older messages ....</span>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t  </div>\r\n\t\t\t   }\r\n\t\t\t\t\t<ImagePreviewComponent imgSrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t\t   displayImagePreview={isPreviewImageOpen}\r\n\t\t\t\t\t\t\t\t\t\t   setDisplayImagePreview={handlePopupState}/>\r\n\t\t\t   {chatHistory && chatHistory.map((messageModel, index, array) => (\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t  key={index}\r\n\t\t\t\t  enterDelay={1000}\r\n\t\t\t\t  leaveDelay={0}\r\n\t\t\t\t  title={new Date(messageModel.time).getHours() + \":\" + new Date(messageModel.time).getMinutes()}\r\n\t\t\t\t  placement=\"left\">\r\n\t\t\t\t  <div className={\"msg \" + styleSelectedMessage()} key={index}\r\n\t\t\t\t\t  style={{ display: \"flex\" }}>\r\n\t\t\t\t    {index >= 1 && array[index - 1].userId === array[index].userId\r\n\t\t\t\t\t ? <div style={{\r\n\t\t\t\t\t   minWidth: \"40px\",\r\n\t\t\t\t\t   width: \"40px\",\r\n\t\t\t\t\t   height: \"40px\"\r\n\t\t\t\t\t }}/>\r\n\t\t\t\t\t : <div style={{\r\n\t\t\t\t\t   fontFamily: \"Segoe UI,SegoeUI,\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif\",\r\n\t\t\t\t\t   backgroundColor: `${messageModel.color}`,\r\n\t\t\t\t\t   fontWeight: \"bold\",\r\n\t\t\t\t\t   minWidth: \"40px\",\r\n\t\t\t\t\t   width: \"40px\",\r\n\t\t\t\t\t   height: \"40px\",\r\n\t\t\t\t\t   textAlign: \"center\",\r\n\t\t\t\t\t   fontSize: \"20px\",\r\n\t\t\t\t\t   borderRadius: \"8px\",\r\n\t\t\t\t\t   border: `1px solid ${generateIconColorMode(theme)}`,\r\n\t\t\t\t\t   lineHeight: \"37px\"\r\n\t\t\t\t\t }}>\r\n\t\t\t\t\t   <div style={{ color: \"#FFFFFF\" }}>{messageModel.initials}</div>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t    }\r\n\t\t\t\t    <div style={{ margin: \"4px\" }}>\r\n\t\t\t\t\t {index >= 1 && array[index - 1].userId === array[index].userId\r\n\t\t\t\t\t   ? <div/>\r\n\t\t\t\t\t   : <div>\r\n\t\t\t\t\t\t<b>{messageModel.sender} </b>\r\n\t\t\t\t\t   </div>\r\n\t\t\t\t\t }\r\n\t\t\t\t\t {\r\n\t\t\t\t\t   messageModel.type === TypeMessageEnum.TEXT\r\n\t\t\t\t\t\t? <div style={{ overflowWrap: \"break-word\" }}>\r\n\t\t\t\t\t\t  {messageModel.message}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: <div>\r\n\t\t\t\t\t\t  {generateImageRender(messageModel)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t }\r\n\t\t\t\t    </div>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t   ))}\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t  float: \"left\",\r\n\t\t\t\t  clear: \"both\"\r\n\t\t\t\t}}\r\n\t\t\t\t\t\t ref={(el) => {\r\n\t\t\t\t\t  messageEnd = el\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{\r\n\t\t\t   display: \"flex\",\r\n\t\t\t   flexDirection: \"column\"\r\n\t\t\t }}>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t  boxSizing: \"border-box\",\r\n\t\t\t\t  borderBottom: \"0.5px solid #C8C8C8\"\r\n\t\t\t\t}}>\r\n\t\t\t\t  {\r\n\t\t\t\t    imagePreviewUrl &&\r\n\t\t\t\t\t\t  <div style={{\r\n\t\t\t\t\t   padding: \"10px\",\r\n\t\t\t\t\t   height: \"120px\",\r\n\t\t\t\t\t   maxWidth: \"120px\",\r\n\t\t\t\t\t   background: \"url('\" + imagePreviewUrl + \"')\",\r\n\t\t\t\t\t   backgroundSize: \"cover\",\r\n\t\t\t\t\t   position: \"relative\",\r\n\t\t\t\t\t   borderRadius: \"10%\"\r\n\t\t\t\t\t }}>\r\n\t\t\t\t\t\t\t  <IconButton style={{\r\n\t\t\t\t\t\t  height: \"20px\",\r\n\t\t\t\t\t\t  position: \"absolute\",\r\n\t\t\t\t\t\t  right: \"8px\",\r\n\t\t\t\t\t\t  top: \"8px\",\r\n\t\t\t\t\t\t  width: \"20px\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t  onClick={event => resetImageBuffer(event)}>\r\n\t\t\t\t\t\t\t\t  <HighlightOffIcon/>\r\n\t\t\t\t\t\t\t  </IconButton>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t  }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t  display: \"flex\",\r\n\t\t\t\t  width: \"100%\",\r\n\t\t\t\t  alignItems: \"center\",\r\n\t\t\t\t  position: \"relative\",\r\n\t\t\t\t  bottom: \"0\",\r\n\t\t\t\t  padding: \"5px\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\tid=\"raised-button-file\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={event => previewFile(event)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<CallWindowComponent userId={userId || 0} groupUrl={groupUrl}/>\r\n\t\t\t\t\t\t<label htmlFor=\"raised-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" component=\"span\">\r\n\t\t\t\t\t\t\t\t<ImageIcon/>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<CustomTextField\r\n\t\t\t\t\t\t\tid={\"inputChatMessenger\"}\r\n\t\t\t\t\t\t\tlabel={\"Write a message\"}\r\n\t\t\t\t\t\t\tvalue={message}\r\n\t\t\t\t\t\t\tonClick={markMessageSeen}\r\n\t\t\t\t\t\t\thandleChange={(event: any) => handleChange(event)}\r\n\t\t\t\t\t\t\ttype={\"text\"}\r\n\t\t\t\t\t\t\tkeyUp={submitMessage}\r\n\t\t\t\t\t\t\tisMultiline={true}\r\n\t\t\t\t\t\t\tisDarkModeEnable={theme}\r\n\t\t\t\t\t\t\tname={\"mainWriteMessage\"}/>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={sendMessage}\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmarginLeft: \"3px\",\r\n\t\t\t\t\t\tmaxWidth: \"20px\"\r\n\t\t\t\t\t   }}\r\n\t\t\t\t\t\t\tdisabled={!imageLoaded && message === \"\"}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<SendIcon/>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t }\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}